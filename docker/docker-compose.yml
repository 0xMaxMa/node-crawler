version: '3'

services:
  crawler:
    build: ./crawler
    volumes:
     - ./data:/data
    command: "crawl --timeout 10m --table /data/"
  
  api:
    build: ./api
    network_mode: "host" 
    volumes:
     - ./data:/data
    depends_on:
     - crawler
    command: "--crawler-db-path /data/nodetable --api-db-path /data/nodes"

  frontend:
    build: ./web
    network_mode: "host"
    volumes:
     - ./nginx.conf:/etc/nginx/conf.d/default.conf
    depends_on:
     - api

